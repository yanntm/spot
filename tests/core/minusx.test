#!/bin/sh
# -*- coding: utf-8 -*-
# Copyright (C) 2016, 2020 Laboratoire de Recherche et DÃ©veloppement de
# l'Epita (LRDE).
#
# This file is part of Spot, a model checking library.
#
# Spot is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 3 of the License, or
# (at your option) any later version.
#
# Spot is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
# or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
# License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.

. ./defs
set -e

# make sure option -x reports unknown arguments
ltl2tgba - -x foo </dev/null 2>error && exit 1
grep "ltl2tgba: option 'foo' was not used" error
ltl2tgba -F- -x ba-simul,foo,bar </dev/null 2>error && exit 1
grep -v 'ba-simul' error
grep -- "- 'foo'" error
grep -- "- 'bar'" error

# Likewise for --sat-minimise

ltl2tgba -f FGa | autfilt -D |
autfilt --sat-minimize='acc="co-Buchi",other' 2>error && exit 1
grep "autfilt: option 'other' was not used" error

# Make sure wdba-det-max has an effect
f='G(!p0 | (!p2 U (p1 | (!p2 & p3 & X(!p2 U p4)))) | G!p1)'
test 4,1 = `ltl2tgba --stats=%s,%d "$f"`
test 6,0 = `ltl2tgba -x wdba-det-max=4 --stats=%s,%d "$f"`
